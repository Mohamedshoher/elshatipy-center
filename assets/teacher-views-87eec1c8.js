import{r as e}from"./vendor-79b9f383.js";var t={exports:{}},a={},r=e,n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,a){var r,l={},i=null,c=null;for(r in void 0!==a&&(i=""+a),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!d.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:n,type:e,key:i,ref:c,props:l,_owner:o.current}}a.Fragment=l,a.jsx=i,a.jsxs=i,t.exports=a;var c=t.exports;const h=c.Fragment,m=c.jsx,g=c.jsxs;function u(e){return 5*Math.round(e/5)}var x=(e=>(e.PRESENT="present",e.ABSENT="absent",e))(x||{}),b=(e=>(e.NEW="new",e.RECENT_PAST="recent_past",e.DISTANT_PAST="distant_past",e.READING="reading",e))(b||{}),p=(e=>(e.EXCELLENT="excellent",e.VERY_GOOD="very_good",e.GOOD="good",e.REPEAT="repeat",e))(p||{}),f=(e=>(e.SUNDAY="sunday",e.MONDAY="monday",e.TUESDAY="tuesday",e.WEDNESDAY="wednesday",e.THURSDAY="thursday",e.FRIDAY="friday",e.SATURDAY="saturday",e))(f||{}),y=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(y||{}),N=(e=>(e.SALARY="salary",e.PARTNERSHIP="partnership",e))(N||{}),w=(e=>(e.PRESENT="present",e.ABSENT="absent",e.DEDUCTION_FULL_DAY="deduction_full_day",e.DEDUCTION_HALF_DAY="deduction_half_day",e.DEDUCTION_QUARTER_DAY="deduction_quarter_day",e.MISSING_REPORT="missing_report",e.BONUS_DAY="bonus_day",e.BONUS_HALF_DAY="bonus_half_day",e.BONUS_QUARTER_DAY="bonus_quarter_day",e.EXCUSED="excused",e.HALF_DAY="half_day",e.QUARTER_DAY="quarter_day",e))(w||{}),v=(e=>(e.RENT="rent",e.DEVELOPMENT="development",e.UTILITIES="utilities",e.TEACHER_SALARY="teacher_salary",e.TEACHER_BONUS="teacher_bonus",e.STAFF_SALARY="staff_salary",e.SUPERVISOR_SALARY="supervisor_salary",e.OTHER="other",e))(v||{});const S=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),m("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),D=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("path",{d:"M12 20V10"}),m("path",{d:"M18 20V4"}),m("path",{d:"M6 20V16"})]}),k=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m("circle",{cx:"12",cy:"7",r:"4"})]}),A=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),m("circle",{cx:"9",cy:"7",r:"4"}),m("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),m("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),E=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),m("path",{d:"m9 16 2 2 4-4"})]}),_=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("circle",{cx:"12",cy:"12",r:"8"}),m("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),m("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),m("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),m("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),m("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),m("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),m("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}),m("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),m("path",{d:"M12 18V6"})]}),T=({className:e})=>m("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",children:m("path",{d:"M16.75 13.96c.25.13.43.2.5.33.07.13.07.66 0 1.14-.07.48-.83 1-1.16 1.16-.33.16-1.09.13-1.65-.07-.56-.2-1.28-.5-2.07-1.03-.8-.53-1.53-1.2-2.1-1.93-.57-.73-.9-1.53-.9-2.26 0-.73.23-1.33.5-1.76.26-.43.56-.6.8-.73.23-.13.5-.13.7.04.14.1.26.3.37.43.1.13.16.26.2.4.03.14.04.26 0 .4-.04.14-.1.26-.2.37l-.23.23c-.1.1-.16.2-.14.3.03.1.1.26.23.43.14.16.26.33.43.5.16.16.33.3.5.43.16.14.33.23.46.3.14.07.26.04.37-.06l.23-.23c.1-.1.2-.16.33-.1.14.03.3.07.43.13.13.06.26.13.33.2zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.33 0 2.6-.26 3.77-.76l2.1 2.1c.26.26.66.33.9.06s.33-.66.06-.9l-2.1-2.1C19.74 19.33 22 15.9 22 12c0-5.52-4.48-10-10-10zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})}),C=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),L=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("polyline",{points:"3 6 5 6 21 6"}),m("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),m("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),m("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),R=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),m("polyline",{points:"14 2 14 8 20 8"}),m("path",{d:"M12 18v-4"}),m("path",{d:"M9 18v-2"}),m("path",{d:"M15 18v-6"})]}),O=({className:e})=>g("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m("polyline",{points:"12 5 19 12 12 19"})]}),U=({className:e})=>m("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),B=({isOpen:t,onClose:a,onConfirm:r,teacherName:n})=>{const[l,s]=e.useState("");if(e.useEffect(()=>{t&&s("")},[t]),!t)return null;return m("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[60] flex justify-center items-center p-4",children:g("div",{className:"bg-white rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-lg",children:[g("h2",{className:"text-2xl font-bold mb-4 text-gray-700",children:["Ø³Ø¨Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ù„Ù€ ",n]}),g("form",{onSubmit:e=>{e.preventDefault(),l.trim()?r(l.trim()):alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©.")},children:[g("div",{className:"mb-6",children:[m("label",{htmlFor:"bonusReason",className:"block text-gray-600 mb-2",children:"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªÙˆØ¶ÙŠØ­ Ø³Ø¨Ø¨ Ù…Ù†Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©:"}),m("textarea",{id:"bonusReason",value:l,onChange:e=>s(e.target.value),rows:4,className:"w-full px-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,autoFocus:!0})]}),g("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[m("button",{type:"button",onClick:a,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Ø¥Ù„ØºØ§Ø¡"}),m("button",{type:"submit",className:"px-6 py-2 rounded-lg text-white bg-purple-600 hover:bg-purple-700 transition-colors order-1 sm:order-2",children:"ØªØ£ÙƒÙŠØ¯ ÙˆÙ…Ù†Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©"})]})]})]})})},I=({isOpen:t,onClose:a,onConfirm:r,teacherName:n})=>{const[l,s]=e.useState("");if(e.useEffect(()=>{t&&s("")},[t]),!t)return null;return m("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[60] flex justify-center items-center p-4",children:g("div",{className:"bg-white rounded-lg shadow-2xl p-6 sm:p-8 w-full max-w-lg",children:[g("h2",{className:"text-2xl font-bold mb-4 text-gray-700",children:["Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ… Ù„Ù€ ",n]}),g("form",{onSubmit:e=>{e.preventDefault(),l.trim()?r(l.trim()):alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ….")},children:[g("div",{className:"mb-6",children:[m("label",{htmlFor:"deductionReason",className:"block text-gray-600 mb-2",children:"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªÙˆØ¶ÙŠØ­ Ø³Ø¨Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ…:"}),m("textarea",{id:"deductionReason",value:l,onChange:e=>s(e.target.value),rows:4,className:"w-full px-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0,autoFocus:!0})]}),g("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[m("button",{type:"button",onClick:a,className:"px-6 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Ø¥Ù„ØºØ§Ø¡"}),m("button",{type:"submit",className:"px-6 py-2 rounded-lg text-white bg-orange-600 hover:bg-orange-700 transition-colors order-1 sm:order-2",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ…"})]})]})]})})},$=({month:t,attendanceRecords:a,onDateClick:r})=>{const n=e.useMemo(()=>{const[e,a]=t.split("-"),r=parseInt(e),n=parseInt(a)-1,l=new Date(r,n,1),s=new Date(r,n+1,0).getDate(),o=(l.getDay()+1)%7,d=[];for(let t=0;t<o;t++)d.push(null);for(let t=1;t<=s;t++)d.push(t);return d},[t]);return g("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 w-full h-full",children:[m("div",{className:"grid grid-cols-7 gap-1 mb-2 border-b pb-2",children:["Ø§Ù„Ø³Ø¨Øª","Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©"].map(e=>m("div",{className:"text-center text-xs font-bold text-gray-400 py-1",children:e},e))}),m("div",{className:"grid grid-cols-7 gap-1",children:n.map((e,n)=>{if(null===e)return m("div",{className:"aspect-square"},`empty-${n}`);const l=`${t}-${String(e).padStart(2,"0")}`,s=(e=>{const t=a.find(t=>t.date===e);if(!t)return"bg-white hover:bg-gray-50 text-gray-700 border-gray-100";switch(t.status){case w.PRESENT:return"bg-green-100 text-green-700 hover:bg-green-200 border-green-200";case w.ABSENT:return"bg-red-100 text-red-700 hover:bg-red-200 border-red-200";case w.BONUS_DAY:case w.BONUS_HALF_DAY:case w.BONUS_QUARTER_DAY:return"bg-teal-100 text-teal-700 hover:bg-teal-200 border-teal-200";case w.DEDUCTION_FULL_DAY:case w.DEDUCTION_HALF_DAY:case w.DEDUCTION_QUARTER_DAY:case w.MISSING_REPORT:return"bg-orange-100 text-orange-700 hover:bg-orange-200 border-orange-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}})(l),o=a.find(e=>e.date===l);return g("div",{onClick:()=>r(l),className:`aspect-square rounded-xl flex flex-col items-center justify-center cursor-pointer border transition-all relative ${s}`,children:[m("span",{className:"font-bold text-sm sm:text-base",children:e}),o&&m("div",{className:"mt-1 w-1.5 h-1.5 rounded-full bg-current opacity-60"})]},e)})})]})},Y=({isOpen:e,onClose:t,date:a,currentStatus:r,onSetStatus:n})=>{if(!e)return null;const l=new Date(a).toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return m("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[60] flex justify-center items-center p-4",onClick:t,children:g("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm",onClick:e=>e.stopPropagation(),children:[m("h3",{className:"font-bold text-lg text-center mb-1 text-gray-800",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±"}),m("p",{className:"text-center text-gray-500 text-sm font-bold mb-6",children:l}),g("div",{className:"space-y-3",children:[g("div",{className:"grid grid-cols-2 gap-3",children:[m("button",{onClick:()=>n(w.PRESENT),className:"p-4 rounded-xl border font-black text-sm transition-all "+(r===w.PRESENT?"ring-2 ring-green-500 bg-green-100 text-green-700":"bg-green-50 text-green-700 border-green-100 hover:bg-green-100"),children:"Ø­Ø§Ø¶Ø± âœ…"}),m("button",{onClick:()=>n(w.ABSENT),className:"p-4 rounded-xl border font-black text-sm transition-all "+(r===w.ABSENT?"ring-2 ring-red-500 bg-red-100 text-red-700":"bg-red-50 text-red-700 border-red-100 hover:bg-red-100"),children:"ØºØ§Ø¦Ø¨ âŒ"})]}),m("div",{className:"pt-2 border-t text-xs font-bold text-gray-400 text-center uppercase tracking-wider",children:"Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"}),g("div",{className:"grid grid-cols-2 gap-2",children:[m("button",{onClick:()=>n(w.BONUS_DAY),className:"p-3 rounded-xl bg-teal-50 text-teal-700 text-xs font-bold hover:bg-teal-100 border border-teal-100",children:"Ù…ÙƒØ§ÙØ£Ø© (ÙŠÙˆÙ…)"}),m("button",{onClick:()=>n(w.DEDUCTION_FULL_DAY),className:"p-3 rounded-xl bg-orange-50 text-orange-700 text-xs font-bold hover:bg-orange-100 border border-orange-100",children:"Ø®ØµÙ… (ÙŠÙˆÙ…)"}),m("button",{onClick:()=>n(w.BONUS_HALF_DAY),className:"p-3 rounded-xl bg-teal-50 text-teal-700 text-xs font-bold hover:bg-teal-100 border border-teal-100",children:"Ù…ÙƒØ§ÙØ£Ø© (Ù†ØµÙ)"}),m("button",{onClick:()=>n(w.DEDUCTION_HALF_DAY),className:"p-3 rounded-xl bg-orange-50 text-orange-700 text-xs font-bold hover:bg-orange-100 border border-orange-100",children:"Ø®ØµÙ… (Ù†ØµÙ)"})]}),r&&m("button",{onClick:()=>n(null),className:"w-full mt-2 p-3 rounded-xl border border-red-100 text-red-600 font-bold text-sm hover:bg-red-50 flex items-center justify-center gap-2",children:"Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ ğŸ—‘ï¸"})]}),m("button",{onClick:t,className:"mt-6 w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-bold text-sm hover:bg-gray-200",children:"Ø¥Ù„ØºØ§Ø¡"})]})})},P=e=>{switch(e){case w.ABSENT:return 1;case w.HALF_DAY:return.5;case w.QUARTER_DAY:return.25;case w.DEDUCTION_FULL_DAY:return 1;case w.DEDUCTION_HALF_DAY:return.5;case w.DEDUCTION_QUARTER_DAY:case w.MISSING_REPORT:return.25;default:return 0}},M=e=>{switch(e){case w.BONUS_DAY:return 1;case w.BONUS_HALF_DAY:return.5;case w.BONUS_QUARTER_DAY:return.25;default:return 0}},j=({onBack:t,teacher:a,supervisor:r,groups:n,students:l,teacherAttendance:s,teacherPayrollAdjustments:o,financialSettings:d,onEditTeacherClick:i,onEditSupervisorClick:c,onDeleteTeacher:h,onDeleteSupervisor:x,onSetTeacherAttendance:b,onUpdatePayrollAdjustments:p,onLogExpense:f,onViewTeacherReport:y,onSendNotificationToAll:D,teacherCollections:j=[],teacherManualBonuses:F=[],currentUserRole:H,onAddTeacherCollection:G,onAddManualBonus:W,onDeleteManualBonus:Q,onDeleteTeacherAttendance:V,onResetPayment:z})=>{const[q,X]=e.useState("collections"),[J,K]=e.useState(()=>(new Date).toISOString().substring(0,7)),[Z,ee]=e.useState(""),[te,ae]=e.useState(""),[re,ne]=e.useState(!1),[le,se]=e.useState(null),[oe,de]=e.useState(!1),[ie,ce]=e.useState(null),[he,me]=e.useState(""),[ge,ue]=e.useState(""),[xe,be]=e.useState("bonus"),[pe,fe]=e.useState("custom"),[ye,Ne]=e.useState(null),[we,ve]=e.useState(!1),Se=a||r,De=!!r;if(e.useEffect(()=>{Se&&X("collections")},[Se?.id]),!Se)return g("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:[m("p",{className:"text-gray-500 mb-4",children:"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¸Ù Ù„Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡."}),m("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-all font-bold",children:"Ø§Ù„Ø¹ÙˆØ¯Ø©"})]});const ke=Se.id,Ae=Se.name,Ee=Se.phone,_e=Se.salary||Se.salary||0,Te=e.useMemo(()=>!!a&&n.some(e=>e.teacherId===a.id),[n,a]),Ce=e.useMemo(()=>a?n.filter(e=>e.teacherId===a.id):[],[n,a]),Le=(new Date).toISOString().split("T")[0],Re=e=>{const t="py-3 px-2 font-bold text-center transition-all duration-200 focus:outline-none flex-shrink-0 flex items-center justify-center gap-2 flex-grow text-sm";return q===e?`${t} border-b-2 border-teal-600 text-teal-600 bg-teal-50`:`${t} text-gray-500 hover:bg-gray-100`},Oe=e.useMemo(()=>{if(!ke)return[];const e=J;return s.filter(t=>t.teacherId===ke&&t.date.startsWith(e)&&t.status!==w.EXCUSED)},[ke,s,J]),Ue=e.useMemo(()=>{if(!ke)return{baseSalary:0,adjustments:{bonus:0,isPaid:!1},absenceDays:0,bonusDays:0,absenceDeduction:0,attendanceBonus:0,manualBonusTotal:0,finalSalary:0,isPaid:!1,isPartnership:!1,partnershipAmount:0,collectedAmount:0,totalHandedOver:0,remainingBalance:0};let e=0;if(!De&&a){const t=new Set(n.filter(e=>e.teacherId===a.id).map(e=>e.id)),r=l.filter(e=>t.has(e.groupId)),s=J;e=r.reduce((e,t)=>{const a=t.fees?.find(e=>e.month===s&&e.paid);return e+(a?.amountPaid||0)},0)}const t=!De&&a?.paymentType===N.PARTNERSHIP,r=t?0:_e,s=t&&a?.partnershipPercentage||0,i=t?e*s/100:0,c=j.filter(e=>e.teacherId===ke&&e.month===J).reduce((e,t)=>e+t.amount,0),h=e-c,m=F.filter(e=>e.teacherId===ke&&e.month===J).reduce((e,t)=>e+t.amount,0),g=o.find(e=>e.teacherId===ke&&e.month===J)||{bonus:0,isPaid:!1};let x=0,b=0;for(const a of Oe)x+=P(a.status),b+=M(a.status);const p=x,f=b,y=t?i:r,w=d.workingDaysPerMonth||22,v=y>0?y/w:0,S=u(v*p*(d.absenceDeductionPercentage/100)),D=u(v*f);return{baseSalary:r,adjustments:g,absenceDays:p,bonusDays:f,absenceDeduction:S,attendanceBonus:D,manualBonusTotal:m,finalSalary:u(t?i+m+D-S:r+m+D-S),isPaid:g.isPaid,isPartnership:t,partnershipAmount:i,collectedAmount:e,totalHandedOver:c,remainingBalance:h,partnershipPercentage:s}},[ke,_e,J,o,Oe,d,j,F,a,De,n,l]),Be=e.useMemo(()=>Oe.filter(e=>M(e.status)>0&&e.reason),[Oe]),Ie=e.useMemo(()=>Oe.filter(e=>P(e.status)>0&&e.status!==w.ABSENT&&e.reason),[Oe]);return g("div",{className:"min-h-screen bg-gray-50 flex flex-col pb-20 sm:pb-0",children:[g("header",{className:"bg-white border-b sticky top-0 z-10 shadow-sm",children:[g("div",{className:"container mx-auto px-4 min-h-[4rem] flex flex-col md:flex-row items-center justify-between gap-3 py-3 md:py-0",children:[g("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[m("button",{onClick:t,className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:m(O,{className:"w-6 h-6"})}),g("div",{className:"flex items-center gap-3",children:[m("div",{className:"w-10 h-10 rounded-full flex items-center justify-center shadow-sm flex-shrink-0 "+(De?"bg-blue-100 text-blue-600":"bg-teal-100 text-teal-600"),children:m(De?k:S,{className:"w-5 h-5"})}),g("div",{className:"min-w-0",children:[m("h1",{className:"text-lg md:text-xl font-bold text-gray-800 truncate leading-tight",children:Ae}),m("p",{className:"text-xs font-bold "+(De?"text-blue-600":"text-teal-600"),children:De?"Ù…Ø´Ø±Ù":"Ù…Ø¯Ø±Ø³"})]})]})]}),g("div",{className:"flex items-center justify-center md:justify-end gap-2 w-full md:w-auto border-t md:border-t-0 pt-2 md:pt-0",children:[("director"===H||"supervisor"===H)&&m("a",{href:`https://wa.me/${Ee.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors",title:"ÙˆØ§ØªØ³Ø§Ø¨",children:m(T,{className:"w-5 h-5"})}),m("a",{href:`tel:${Ee.replace(/[^0-9]/g,"")}`,className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"Ø§ØªØµØ§Ù„",children:m(U,{className:"w-5 h-5"})}),!De&&m("button",{onClick:()=>y(ke),className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors",title:"ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„",children:m(R,{className:"w-5 h-5"})}),m("button",{onClick:()=>De?c?.(r):i(a),className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",title:"ØªØ¹Ø¯ÙŠÙ„",children:m(C,{className:"w-5 h-5"})}),"director"===H&&m("button",{onClick:()=>De?x?.(r.id):h(a.id),disabled:!De&&Te,className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:Te?"Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ù…Ø¯Ø±Ø³ Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ù…Ø¬Ù…ÙˆØ¹Ø©":"Ø­Ø°Ù",children:m(L,{className:"w-5 h-5"})})]})]}),m("div",{className:"bg-white border-t border-gray-200 overflow-x-auto",children:g("div",{className:"container mx-auto flex",children:[g("button",{onClick:()=>X("collections"),className:Re("collections"),children:[m(_,{className:"w-5 h-5"}),m("span",{className:"hidden sm:inline",children:"Ø³Ø¬Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„"})]}),g("button",{onClick:()=>X("attendance"),className:Re("attendance"),children:[m(E,{className:"w-5 h-5"}),m("span",{className:"hidden sm:inline",children:"Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±"})]}),g("button",{onClick:()=>X("payroll"),className:Re("payroll"),children:[m(_,{className:"w-5 h-5"}),m("span",{className:"hidden sm:inline",children:"Ø§Ù„Ø±Ø§ØªØ¨ ÙˆØ§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"})]}),g("button",{onClick:()=>X("groups"),className:Re("groups"),children:[m(A,{className:"w-5 h-5"}),m("span",{className:"hidden sm:inline",children:De?"Ø§Ù„Ø£Ù‚Ø³Ø§Ù…":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"})]})]})})]}),g("main",{className:"container mx-auto p-4 flex-grow",children:["groups"!==q&&g("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-6 flex flex-col sm:flex-row items-center gap-4",children:[m("label",{className:"text-sm font-bold text-gray-700 whitespace-nowrap",children:"Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ù‡Ø±:"}),m("input",{type:"month",value:J,onChange:e=>K(e.target.value),className:"w-full sm:w-auto px-4 py-2 border rounded-xl bg-gray-50 focus:ring-2 focus:ring-teal-100 outline-none transition-all font-bold text-gray-800"})]}),"collections"===q&&g("div",{className:"max-w-4xl mx-auto space-y-6",children:[g("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden",children:[m("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-teal-500"}),g("h4",{className:"font-bold text-teal-800 mb-4 flex items-center gap-2 text-lg",children:[m(_,{className:"w-6 h-6"}),"ØªØ³Ø¬ÙŠÙ„ Ù…Ø¨Ù„Øº Ù…Ø­ØµÙ„ Ù…Ù† Ø§Ù„Ù…Ø¯Ø±Ø³"]}),g("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g("div",{children:[m("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)"}),m("input",{type:"number",value:he,onChange:e=>me(e.target.value),className:"w-full px-5 py-3 border rounded-xl bg-gray-50 focus:ring-2 focus:ring-teal-100 outline-none text-xl font-black text-teal-700",placeholder:"Ù…Ø«Ù„Ø§Ù‹: 500"})]}),g("div",{children:[m("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),m("input",{type:"text",value:ge,onChange:e=>ue(e.target.value),className:"w-full px-5 py-3 border rounded-xl bg-gray-50 focus:ring-2 focus:ring-teal-100 outline-none",placeholder:"Ø¹Ù† Ø£ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø£Ùˆ Ø·Ø§Ù„Ø¨..."})]})]}),m("button",{onClick:()=>{if(!G||!ke)return;const e=parseFloat(he);!e||e<=0?alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­."):(G({teacherId:ke,date:(new Date).toISOString(),amount:e,month:J,notes:ge}),me(""),ue(""),alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­."))},className:"mt-4 w-full py-3 bg-teal-600 text-white rounded-xl shadow-lg shadow-teal-100 hover:bg-teal-700 transition-all font-bold active:scale-[0.98]",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ­ØµÙŠÙ„"})]}),g("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-100 text-center",children:[m("p",{className:"text-xs font-bold text-blue-400 mb-1 uppercase tracking-wider",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ Ø­ØµÙ„Ù‡ Ø§Ù„Ù…Ø¯Ø±Ø³"}),g("p",{className:"text-2xl font-black text-blue-700",children:[Ue.collectedAmount.toLocaleString()," Ø¬.Ù…"]})]}),g("div",{className:"bg-teal-50 p-4 rounded-2xl border border-teal-100 text-center",children:[m("p",{className:"text-xs font-bold text-teal-400 mb-1 uppercase tracking-wider",children:"Ù…Ø§ Ø³Ù„Ù…Ù‡ Ø§Ù„Ù…Ø¯Ø±Ø³ Ù„Ù„Ù…Ø±ÙƒØ²"}),g("p",{className:"text-2xl font-black text-teal-700",children:[Ue.totalHandedOver.toLocaleString()," Ø¬.Ù…"]})]}),g("div",{className:(Ue.remainingBalance>0?"bg-red-50 border-red-100":"bg-green-50 border-green-100")+" p-4 rounded-2xl border text-center",children:[m("p",{className:`text-xs font-bold ${Ue.remainingBalance>0?"text-red-400":"text-green-400"} mb-1 uppercase tracking-wider`,children:"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ø¹Ù‡ (Ø¹Ø¬Ù€Ø²)"}),g("p",{className:"text-2xl font-black "+(Ue.remainingBalance>0?"text-red-700":"text-green-700"),children:[Ue.remainingBalance.toLocaleString()," Ø¬.Ù…"]})]})]}),g("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[m("div",{className:"p-4 border-b bg-gray-50/50",children:m("h3",{className:"text-lg font-bold text-gray-800",children:"ØªØ§Ø±ÙŠØ® Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…"})}),m("div",{className:"overflow-x-auto text-center",children:g("table",{className:"min-w-full divide-y divide-gray-200",children:[m("thead",{className:"bg-gray-50",children:g("tr",{children:[m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]})}),m("tbody",{className:"bg-white divide-y divide-gray-100",children:j.filter(e=>e.teacherId===ke&&e.month===J).length>0?j.filter(e=>e.teacherId===ke&&e.month===J).sort((e,t)=>t.date.localeCompare(e.date)).map(e=>g("tr",{children:[m("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold",children:new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric",month:"long"})}),g("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-teal-600 font-extrabold",children:[e.amount.toLocaleString()," Ø¬.Ù…"]}),m("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.notes||"-"})]},e.id)):m("tr",{children:m("td",{colSpan:3,className:"px-6 py-10 text-center text-gray-400 italic",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ØªØ³Ù„ÙŠÙ… Ù…Ø³Ø¬Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±."})})})]})})]})]}),"attendance"===q&&g("div",{className:"max-w-4xl mx-auto space-y-6",children:[g("div",{className:"grid grid-cols-2 gap-4",children:[g("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center justify-between",children:[g("div",{children:[m("p",{className:"text-xs font-bold text-gray-400 mb-1",children:"ØµØ§ÙÙŠ Ø£ÙŠØ§Ù… Ø§Ù„ØºÙŠØ§Ø¨"}),g("p",{className:"text-2xl font-black text-red-600",children:[Ue.absenceDays," ÙŠÙ€ÙˆÙ…"]})]}),m(E,{className:"w-10 h-10 text-red-100"})]}),g("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center justify-between",children:[g("div",{children:[m("p",{className:"text-xs font-bold text-gray-400 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª"}),g("p",{className:"text-2xl font-black text-green-600",children:[Ue.bonusDays," ÙŠÙ€ÙˆÙ…"]})]}),m(E,{className:"w-10 h-10 text-green-100"})]})]}),g("div",{className:"mb-6",children:[m("h3",{className:"text-lg font-bold text-gray-800 mb-4 px-2",children:"Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ù„Ø­Ø¶ÙˆØ±"}),m($,{month:J,attendanceRecords:Oe,onDateClick:e=>{Ne(e),ve(!0)}})]}),g("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[m("div",{className:"p-4 border-b bg-gray-50/50",children:m("h3",{className:"text-lg font-bold text-gray-800",children:"Ø³Ø¬Ù„ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª (Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±)"})}),m("div",{className:"md:hidden",children:Oe.length>0?Oe.sort((e,t)=>t.date.localeCompare(e.date)).map(e=>{const t=M(e.status)>0,a=P(e.status)>0;return g("div",{className:"p-4 border-b last:border-b-0 "+(t?"bg-green-50/20":a?"bg-red-50/20":""),children:[g("div",{className:"flex justify-between items-start mb-2",children:[m("div",{children:g("div",{className:"flex items-center gap-2 mb-1",children:[m("p",{className:"text-sm font-bold text-gray-800",children:new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric",month:"long"})}),m("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-black "+(e.status===w.PRESENT?"bg-green-100 text-green-700":t?"bg-teal-100 text-teal-700":"bg-red-100 text-red-700"),children:e.status===w.PRESENT?"Ø­Ø§Ø¶Ø±":e.status===w.ABSENT?"ØºØ§Ø¦Ø¨":e.status===w.BONUS_DAY?"Ù…ÙƒØ§ÙØ£Ø© ÙƒØ§Ù…Ù„Ø©":e.status===w.BONUS_HALF_DAY?"Ù…ÙƒØ§ÙØ£Ø© Ù†ØµÙ":e.status===w.BONUS_QUARTER_DAY?"Ù…ÙƒØ§ÙØ£Ø© Ø±Ø¨Ø¹":e.status===w.DEDUCTION_FULL_DAY?"Ø®ØµÙ… ÙŠÙˆÙ…":e.status===w.DEDUCTION_HALF_DAY?"Ø®ØµÙ… Ù†ØµÙ":e.status===w.DEDUCTION_QUARTER_DAY?"Ø®ØµÙ… Ø±Ø¨Ø¹":e.status===w.MISSING_REPORT?"ØªÙ‚Ø±ÙŠØ± Ù†Ø§Ù‚Øµ":"Ø­Ø§Ù„Ø© Ø£Ø®Ø±Ù‰"})]})}),g("div",{className:"flex items-center gap-2",children:[m("span",{className:"font-black text-sm dir-ltr "+(t?"text-green-600":a?"text-red-600":"text-gray-400"),children:t?`+${M(e.status)}`:a?`-${P(e.status)}`:"-"}),m("button",{onClick:()=>V?.(e.id),className:"p-1.5 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",title:"Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„",children:m(L,{className:"w-4 h-4"})})]})]}),e.reason&&m("p",{className:"text-xs text-gray-500 bg-white/60 p-2 rounded-lg border border-dashed border-gray-200",children:e.reason})]},e.id)}):m("div",{className:"p-8 text-center text-gray-400 italic",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ù…Ø³Ø¬Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±."})}),m("div",{className:"hidden md:block overflow-x-auto text-center",children:g("table",{className:"min-w-full divide-y divide-gray-200",children:[m("thead",{className:"bg-gray-50",children:g("tr",{children:[m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„Ù‚ÙŠÙ…Ø©"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø§Ù„ØªÙØ§ØµÙŠÙ„"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),m("tbody",{className:"bg-white divide-y divide-gray-100",children:Oe.length>0?Oe.sort((e,t)=>t.date.localeCompare(e.date)).map(e=>{const t=M(e.status)>0,a=P(e.status)>0;return g("tr",{className:t?"bg-green-50/20":a?"bg-red-50/20":"",children:[m("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold",children:new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric",month:"long"})}),m("td",{className:"px-6 py-4 whitespace-nowrap",children:m("span",{className:"px-2 py-1 rounded-full text-xs font-bold "+(e.status===w.PRESENT?"bg-green-100 text-green-700":t?"bg-teal-100 text-teal-700":"bg-red-100 text-red-700"),children:e.status===w.PRESENT?"Ø­Ø§Ø¶Ø±":e.status===w.ABSENT?"ØºØ§Ø¦Ø¨":e.status===w.BONUS_DAY?"Ù…ÙƒØ§ÙØ£Ø© ÙƒØ§Ù…Ù„Ø©":e.status===w.BONUS_HALF_DAY?"Ù…ÙƒØ§ÙØ£Ø© Ù†ØµÙ":e.status===w.BONUS_QUARTER_DAY?"Ù…ÙƒØ§ÙØ£Ø© Ø±Ø¨Ø¹":e.status===w.DEDUCTION_FULL_DAY?"Ø®ØµÙ… ÙŠÙˆÙ…":e.status===w.DEDUCTION_HALF_DAY?"Ø®ØµÙ… Ù†ØµÙ":e.status===w.DEDUCTION_QUARTER_DAY?"Ø®ØµÙ… Ø±Ø¨Ø¹":e.status===w.MISSING_REPORT?"ØªÙ‚Ø±ÙŠØ± Ù†Ø§Ù‚Øµ":"Ø­Ø§Ù„Ø© Ø£Ø®Ø±Ù‰"})}),m("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black",children:t?`+${M(e.status)}`:a?`-${P(e.status)}`:"-"}),m("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.reason||"-"}),m("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold",children:m("button",{onClick:()=>V?.(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„",children:m(L,{className:"w-5 h-5"})})})]},e.id)}):m("tr",{children:m("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-400 italic",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ù…Ø³Ø¬Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±."})})})]})})]})]}),"payroll"===q&&g("div",{className:"max-w-4xl mx-auto space-y-6",children:[g("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 relative overflow-hidden",children:[m("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-teal-400 to-blue-500"}),g("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-6 mb-8",children:[g("div",{children:[m("h3",{className:"text-2xl font-black text-gray-900 mb-2",children:"Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ ÙˆØ§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª"}),g("p",{className:"text-gray-500 font-bold",children:["Ø´Ù‡Ø± ",new Date(J+"-02").toLocaleString("ar-EG",{month:"long",year:"numeric"})]})]}),g("div",{className:"bg-gray-50 px-4 py-2 rounded-2xl border border-gray-100 flex items-center gap-2",children:[m("span",{className:"text-sm font-bold text-gray-500",children:"Ø­Ø§Ù„Ø© Ø§Ù„ØµØ±Ù:"}),m("span",{className:"px-4 py-1.5 rounded-full text-xs font-black shadow-sm "+(Ue.isPaid?"bg-green-100 text-green-700 border border-green-200":"bg-yellow-100 text-yellow-700 border border-yellow-200"),children:Ue.isPaid?"ØªÙ… Ø§Ù„ØµÙ€Ø±Ù âœ…":"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³"})]})]}),g("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 mb-10",children:[g("div",{className:"space-y-4",children:[g("div",{className:"flex justify-between items-center bg-gray-50/50 p-4 rounded-2xl border border-gray-100 transition-all hover:bg-white hover:shadow-sm",children:[m("span",{className:"font-bold text-gray-600",children:"Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ/Ø§Ù„Ø´Ø±Ø§ÙƒØ©:"}),g("span",{className:"text-xl font-black text-gray-900",children:[Ue.isPartnership?Ue.partnershipAmount.toLocaleString():Ue.baseSalary.toLocaleString()," Ø¬.Ù…"]})]}),g("div",{className:"flex justify-between items-center bg-green-50/50 p-4 rounded-2xl border border-green-100 transition-all hover:bg-white hover:shadow-sm",children:[g("div",{className:"flex flex-col",children:[m("span",{className:"font-bold text-green-700",children:"Ù…ÙƒØ§ÙØ¢Øª ÙˆØ­ÙˆØ§ÙØ²:"}),g("span",{className:"text-[10px] text-green-500 font-medium",children:["+ (Ø­Ø¶ÙˆØ± ",Ue.bonusDays," ÙŠÙˆÙ… + ÙŠØ¯ÙˆÙŠ)"]})]}),g("span",{className:"text-xl font-black text-green-700",children:["+",(Ue.attendanceBonus+Ue.manualBonusTotal>0?Ue.attendanceBonus+Ue.manualBonusTotal:0).toLocaleString()," Ø¬.Ù…"]})]}),g("div",{className:"flex justify-between items-center bg-red-50/50 p-4 rounded-2xl border border-red-100 transition-all hover:bg-white hover:shadow-sm",children:[g("div",{className:"flex flex-col",children:[m("span",{className:"font-bold text-red-700",children:"Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ø³ØªÙ‚Ø·Ø§Ø¹Ø§Øª:"}),g("span",{className:"text-[10px] text-red-500 font-medium",children:["- (ØºÙŠØ§Ø¨ ",Ue.absenceDays," ÙŠÙˆÙ… + ÙŠØ¯ÙˆÙŠ)"]})]}),g("span",{className:"text-xl font-black text-red-700",children:["-",(Ue.absenceDeduction+(Ue.manualBonusTotal<0?Math.abs(Ue.manualBonusTotal):0)).toLocaleString()," Ø¬.Ù…"]})]})]}),g("div",{className:"bg-gradient-to-br from-teal-600 to-teal-700 p-8 rounded-[2.5rem] shadow-2xl shadow-teal-200 flex flex-col justify-center items-center text-white relative transition-transform hover:scale-[1.02]",children:[m("div",{className:"absolute top-4 right-4 text-white/20",children:m(_,{className:"w-16 h-16"})}),m("p",{className:"text-sm font-bold opacity-80 mb-2",children:"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ù…Ø³ØªØ­Ù‚"}),m("p",{className:"text-5xl font-black mb-1",children:Ue.finalSalary.toLocaleString()}),m("p",{className:"text-xs font-bold opacity-80 uppercase tracking-widest",children:"Egyptian Pound"})]})]}),g("div",{className:"flex flex-col sm:flex-row gap-4",children:[m("button",{onClick:()=>(e=>{if(!ke||e<=0)return;const t=De?v.SUPERVISOR_SALARY:v.TEACHER_SALARY,a=De?"Ø§Ù„Ù…Ø´Ø±Ù":"Ø§Ù„Ù…Ø¯Ø±Ø³";f({date:(new Date).toISOString().split("T")[0],category:t,description:`Ø±Ø§ØªØ¨ ${a}: ${Ae} - Ø´Ù‡Ø± ${J}`,amount:e}),p({teacherId:ke,month:J,isPaid:!0})})(Ue.finalSalary),disabled:Ue.isPaid||Ue.finalSalary<=0,className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl shadow-xl shadow-blue-100 hover:bg-blue-700 transition-all font-black text-lg disabled:opacity-40 disabled:cursor-not-allowed group active:scale-95",children:Ue.isPaid?"ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµØ±Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹":"ØªØ£ÙƒÙŠØ¯ ÙˆØµØ±Ù Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø¢Ù† ğŸ’¸"}),g("button",{onClick:()=>{if(!ke)return;const e=new Date(J+"-02").toLocaleString("ar-EG",{month:"long",year:"numeric"});let t="ğŸ‘‹ Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡\n";if(t+="ğŸ“Š *ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ*\n",t+=`ğŸ“… *Ø´Ù‡Ø±:* ${e}\n`,t+=`ğŸ‘¤ *${De?"Ø§Ù„Ù…Ø´Ø±Ù":"Ø§Ù„Ù…Ø¯Ø±Ø³"}:* ${Ae}\n`,t+="â”â”â”â”â”â”â”â”â”â”â”â”\n\n",Ue.isPartnership){if(t+=`ğŸ’° *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±Ø§ÙƒØ© (${Ue.partnershipPercentage}%):*\n`,t+=`   â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­ØµÙ„: ${Ue.collectedAmount.toLocaleString()} Ø¬.Ù…\n`,t+=`   â€¢ Ø§Ù„Ù…Ø³Ù„Ù‘Ù… Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©: ${Ue.totalHandedOver.toLocaleString()} Ø¬.Ù…\n`,0!==Ue.remainingBalance){const e=Ue.remainingBalance>0?"(Ø¹Ù„ÙŠÙƒ)":"(Ù„Ùƒ)";t+=`   â€¢ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ${e}: ${Math.abs(Ue.remainingBalance).toLocaleString()} Ø¬.Ù…\n`}t+=`   â€¢ *Ù†ØµÙŠØ¨Ùƒ Ù…Ù† Ø§Ù„Ø¯Ø®Ù„:* ${Ue.partnershipAmount.toFixed(2)} Ø¬.Ù…\n\n`}else t+=`ğŸ’° *Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:* ${Ue.baseSalary.toLocaleString()} Ø¬.Ù…\n\n`;const a=F.filter(e=>e.teacherId===ke&&e.month===J&&e.amount>0),r=Ue.attendanceBonus+a.reduce((e,t)=>e+t.amount,0);r>0&&(t+=`â• *Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª:* (+${r.toLocaleString()} Ø¬.Ù…)\n`,Ue.attendanceBonus>0&&(t+=`   â€¢ Ø­Ø§ÙØ² Ø­Ø¶ÙˆØ± (${Ue.bonusDays} ÙŠÙˆÙ…): +${Ue.attendanceBonus.toLocaleString()} Ø¬.Ù…\n`,Be.length>0&&Be.forEach(e=>{let a="";switch(e.status){case w.BONUS_DAY:a="ÙŠÙˆÙ… ÙƒØ§Ù…Ù„";break;case w.BONUS_HALF_DAY:a="Ù†ØµÙ ÙŠÙˆÙ…";break;case w.BONUS_QUARTER_DAY:a="Ø±Ø¨Ø¹ ÙŠÙˆÙ…"}t+=`     - ${new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric"})}: ${e.reason} (${a})\n`})),a.length>0&&(t+="   â€¢ Ù…ÙƒØ§ÙØ¢Øª Ø¥Ø¶Ø§ÙÙŠØ©:\n",a.forEach(e=>{t+=`     - ${new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric"})}: ${e.reason||"Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨"} (+${e.amount.toLocaleString()})\n`})),t+="\n");const n=F.filter(e=>e.teacherId===ke&&e.month===J&&e.amount<0),l=Ue.absenceDeduction+Math.abs(n.reduce((e,t)=>e+t.amount,0));l>0&&(t+=`â– *Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªÙ‚Ø·Ø§Ø¹Ø§Øª:* (-${l.toLocaleString()} Ø¬.Ù…)\n`,Ue.absenceDeduction>0&&(t+=`   â€¢ Ø®ØµÙ… ØºÙŠØ§Ø¨ (${Ue.absenceDays} ÙŠÙˆÙ…): -${Ue.absenceDeduction.toLocaleString()} Ø¬.Ù…\n`,Ie.length>0&&Ie.forEach(e=>{let a="";switch(e.status){case w.ABSENT:a="ØºÙŠØ§Ø¨";break;case w.DEDUCTION_FULL_DAY:a="Ø®ØµÙ… ÙŠÙˆÙ…";break;case w.DEDUCTION_HALF_DAY:a="Ø®ØµÙ… Ù†ØµÙ";break;case w.DEDUCTION_QUARTER_DAY:a="Ø®ØµÙ… Ø±Ø¨Ø¹";break;case w.MISSING_REPORT:a="ØªÙ‚Ø±ÙŠØ± Ù†Ø§Ù‚Øµ"}t+=`     - ${new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric"})}: ${e.reason} ${a?`(${a})`:""}\n`})),n.length>0&&(t+="   â€¢ Ø®ØµÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:\n",n.forEach(e=>{t+=`     - ${new Date(e.date).toLocaleDateString("ar-EG",{day:"numeric"})}: ${e.reason||"Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨"} (${e.amount.toLocaleString()})\n`})),t+="\n"),t+="â”â”â”â”â”â”â”â”â”â”â”â”\n",t+=`ğŸ’µ *ØµØ§ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨:* *${Ue.finalSalary.toLocaleString()} Ø¬.Ù…*\n`,t+="â”â”â”â”â”â”â”â”â”â”â”â”\n",t+="Ù…Ø¹ ØªØ­ÙŠØ§Øª Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø´Ø§Ø·Ø¨ÙŠ ğŸŒ¹";const s=Ee.replace(/[^0-9]/g,"");if(!s)return void alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ù…Ø³Ø¬Ù„.");const o=encodeURIComponent(t);window.open(`https://wa.me/${s}?text=${o}`,"_blank")},className:"flex items-center justify-center gap-3 py-4 px-10 bg-green-50 text-green-700 border-2 border-green-200 rounded-2xl shadow-lg hover:bg-green-100 transition-all font-black group active:scale-95",children:[m(T,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),m("span",{children:"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ù…Ø¯Ø±Ø³"})]})]})]}),g("div",{className:"bg-white p-8 rounded-3xl border border-gray-100 shadow-sm relative overflow-hidden",children:[m("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-indigo-500"}),m("h4",{className:"font-bold text-indigo-900 mb-6 flex items-center gap-2 text-xl",children:"ğŸ’° Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØ§ÙØ£Ø© Ø£Ùˆ Ø®ØµÙ… ÙŠØ¯ÙˆÙŠ (Ø®Ø§Ø±Ø¬ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)"}),g("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[g("div",{children:[m("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-wider mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©"}),g("select",{value:xe,onChange:e=>be(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-2xl bg-gray-50 font-bold focus:ring-2 focus:ring-indigo-100 outline-none transition-all",children:[m("option",{value:"bonus",children:"Ù…ÙƒØ§ÙØ£Ø© (+)"}),m("option",{value:"deduction",children:"Ø®ØµÙ… (-)"})]})]}),g("div",{children:[m("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-wider mb-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),g("select",{value:pe,onChange:e=>fe(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-2xl bg-gray-50 font-bold focus:ring-2 focus:ring-indigo-100 outline-none transition-all",children:[m("option",{value:"quarter",children:"Ø±Ø¨Ø¹ ÙŠÙˆÙ…"}),m("option",{value:"half",children:"Ù†ØµÙ ÙŠÙˆÙ…"}),m("option",{value:"full",children:"ÙŠÙˆÙ… ÙƒØ§Ù…Ù„"}),m("option",{value:"custom",children:"Ù…Ø¨Ù„Øº Ù…Ø®ØµØµ ÙƒØ§Ø´"})]})]}),"custom"===pe&&g("div",{children:[m("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-wider mb-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø®ØµØµ"}),m("input",{type:"number",value:Z,onChange:e=>ee(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-2xl bg-gray-50 font-bold focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"Ø¬.Ù…"})]}),g("div",{className:"custom"===pe?"col-span-1":"col-span-2",children:[m("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-wider mb-2",children:"Ø§Ù„Ø³Ø¨Ø¨"}),m("input",{type:"text",value:te,onChange:e=>ae(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-2xl bg-gray-50 font-bold focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"Ù…Ø«Ù„Ø§Ù‹: ØªÙ…ÙŠØ² ÙÙŠ ØªØ³Ù…ÙŠØ¯ Ø§Ù„Ø·Ù„Ø§Ø¨"})]})]}),m("button",{onClick:()=>{if(!ke||!W)return;let e=0;if("custom"===pe)e=parseFloat(Z);else{const t=Ue.isPartnership?Ue.partnershipAmount:Ue.baseSalary,a=t>0&&d.workingDaysPerMonth>0?t/d.workingDaysPerMonth:0;switch(pe){case"quarter":e=.25*a;break;case"half":e=.5*a;break;case"full":e=a}e=u(e)}if(isNaN(e)||0===e)return void alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ (ØºÙŠØ± ØµÙØ±ÙŠ).");e="deduction"===xe?-Math.abs(e):Math.abs(e);const t=e<0,a=Math.abs(e),r={teacherId:ke,month:J,amount:e,date:(new Date).toISOString(),addedBy:H||"director"};te&&te.trim()&&(r.reason=te.trim()),W(r);const n=De?"Ù…Ø´Ø±Ù":"Ù…Ø¯Ø±Ø³",l=t?"Ø®ØµÙ… ÙŠØ¯ÙˆÙŠ":"Ù…ÙƒØ§ÙØ£Ø© ÙŠØ¯ÙˆÙŠØ©",s=t?v.OTHER:v.TEACHER_BONUS;f({date:(new Date).toISOString().split("T")[0],category:s,description:`${l} ${t?"Ù…Ù†":"Ù„Ù€"} ${n}: ${Ae}${te?` - ${te}`:""} - Ø´Ù‡Ø± ${J}`,amount:a});alert(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ ${t?"Ø®ØµÙ…":"Ù…ÙƒØ§ÙØ£Ø©"} Ø¨Ù‚ÙŠÙ…Ø© ${a.toLocaleString()} EGP Ø¨Ù†Ø¬Ø§Ø­.`),ee(""),ae(""),fe("custom")},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all font-black active:scale-[0.98]",children:"Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ­ÙØ¸Ù‡Ø§"})]}),g("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[m("div",{className:"p-4 border-b bg-gray-50/50",children:m("h3",{className:"text-lg font-bold text-gray-800",children:"Ø³Ø¬Ù„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ÙŠØ¯ÙˆÙŠØ© (Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±)"})}),m("div",{className:"overflow-x-auto",children:g("table",{className:"min-w-full divide-y divide-gray-200",children:[m("thead",{className:"bg-gray-50",children:g("tr",{children:[m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase text-center",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase text-center",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase text-center",children:"Ø§Ù„Ø³Ø¨Ø¨"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase text-center",children:"Ø¨ÙˆØ§Ø³Ø·Ø©"}),m("th",{className:"px-6 py-3 text-sm font-bold text-gray-500 uppercase text-center",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),m("tbody",{className:"bg-white divide-y divide-gray-100 italic text-center",children:F.filter(e=>e.teacherId===ke&&e.month===J).length>0?F.filter(e=>e.teacherId===ke&&e.month===J).sort((e,t)=>t.date.localeCompare(e.date)).map(e=>g("tr",{className:e.amount<0?"bg-red-50/10":"bg-green-50/10",children:[m("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold",children:new Date(e.date).toLocaleDateString("ar-EG")}),g("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black "+(e.amount<0?"text-red-600":"text-green-600"),children:[e.amount.toLocaleString()," Ø¬.Ù…"]}),m("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.reason||"-"}),m("td",{className:"px-6 py-4 text-sm text-gray-500",children:"director"===e.addedBy?"Ø§Ù„Ù…Ø¯ÙŠØ±":"Ù…Ø´Ø±Ù"}),m("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold",children:m("button",{onClick:()=>{window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ")&&Q?.(e.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Ø­Ø°Ù",children:m(L,{className:"w-5 h-5"})})})]},e.id)):m("tr",{children:m("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ÙŠØ¯ÙˆÙŠØ© Ù…Ø³Ø¬Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±."})})})]})})]})]}),"groups"===q&&m("div",{className:"max-w-4xl mx-auto",children:g("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(De?r?.section||[]:Ce.map(e=>e.name)).map((e,t)=>g("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col items-center text-center transition-all hover:shadow-md hover:border-teal-200 group",children:[m("div",{className:"w-16 h-16 bg-teal-50 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:m(A,{className:"w-8 h-8 text-teal-600"})}),m("h4",{className:"text-xl font-black text-gray-800",children:e}),m("p",{className:"text-sm font-bold text-gray-400 mt-1",children:De?"Ù‚Ø³Ù… ØªØ­Øª Ø§Ù„Ø¥Ø´Ø±Ø§Ù":"Ù…Ø¬Ù…ÙˆØ¹Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©"})]},t)),0===(De?r?.section||[]:Ce).length&&g("div",{className:"col-span-full py-20 bg-white rounded-3xl border border-dashed border-gray-200 flex flex-col items-center justify-center text-gray-400",children:[m(A,{className:"w-16 h-16 mb-4 opacity-20"}),g("p",{className:"italic",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ ",De?"Ø£Ù‚Ø³Ø§Ù… Ø¥Ø´Ø±Ø§Ù":"Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"," Ù…Ø³Ø¬Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¸Ù Ø­Ø§Ù„ÙŠØ§Ù‹."]})]})]})})]}),m(B,{isOpen:re,onClose:()=>ne(!1),onConfirm:e=>{if(!ke||!le)return;b(ke,ye||Le,le,e);let t="";switch(le){case w.BONUS_DAY:t="ÙŠÙˆÙ… ÙƒØ§Ù…Ù„";break;case w.BONUS_HALF_DAY:t="Ù†ØµÙ ÙŠÙˆÙ…";break;case w.BONUS_QUARTER_DAY:t="Ø±Ø¨Ø¹ ÙŠÙˆÙ…"}D(`ğŸ‰ Ù…ÙƒØ§ÙØ£Ø©! Ø­ØµÙ„ ${De?"Ø§Ù„Ù…Ø´Ø±Ù/Ø©":"Ø§Ù„Ù…Ø¯Ø±Ø³/Ø©"} ${Ae} Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø© (${t}) ÙˆØ°Ù„Ùƒ Ù„Ù€: "${e}".`),ne(!1),se(null),Ne(null)},teacherName:Ae}),m(I,{isOpen:oe,onClose:()=>de(!1),onConfirm:e=>{if(!ke||!ie)return;b(ke,ye||Le,ie,e),de(!1),ce(null),Ne(null)},teacherName:Ae}),m(Y,{isOpen:we,onClose:()=>{ve(!1),Ne(null)},date:ye||"",currentStatus:Oe.find(e=>e.date===ye)?.status,onSetStatus:e=>{if(ke&&ye){if(null===e){const e=s.find(e=>e.teacherId===ke&&e.date===ye);return e&&V&&V(e.id),ve(!1),void Ne(null)}e===w.PRESENT||e===w.ABSENT?(b(ke,ye,e),ve(!1),Ne(null)):M(e)>0?(se(e),ve(!1),ne(!0)):P(e)>0&&(ce(e),ve(!1),de(!0))}}})]})};export{x as A,S as B,_ as C,f as D,v as E,h as F,N as P,L as T,k as U,T as W,m as a,w as b,C as c,p as d,b as e,O as f,E as g,R as h,D as i,g as j,A as k,y as l,U as m,I as n,j as o,u as r};
